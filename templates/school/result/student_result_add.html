{% extends 'base/base.html' %}

{% block title %} Add Result {% endblock %}

{% load crispy_forms_tags %}

{% load static %}

{% block content %}

<h1>Add Result</h1>
<div class="container">
    <form action="" method=POST enctype="multipart/form-data">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-primary" type="submit">Create</button>
    </form>
</div>

{{ form.media }}

<script>
    $(document).ready(function () {
        $('#id_exam_assign').change(function () {
            var examId = $(this).val();
            if (examId) {
                $('#id_student_assign').select2({
                    ajax: {
                        url: '/student-autocomplete/?q=' + examId
                    }
                });
            } else {
                $('#id_student_assign').val(null).trigger('change');
            }
        });
    });
</script>

{% endblock %}